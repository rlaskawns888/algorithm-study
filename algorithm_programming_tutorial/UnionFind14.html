<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        /*
            Union Find (합집합 찾기)
            : 그래프 이론에서 두 노드가 같은 집합에 속해있는지 확인하기 위해 
            사용되는 알고리즘. 간단하게 Union Find는 합집합 찾기라고도 불린다.

            - 대표적인 그래프 알고리즘
            
            - 서로소 집합(Disjoint-set) 알고리즘이라고 불림.
            : 공통 원소가 없는 두 집합

            - 여러개의 노드가 존재할 때 두 개의 노드를 선택해서, 현재 이 두 노드가
            서로 같은 그래프에 속하는지 판별하는 알고리즘

            합침(Union)
            : 부모를 합칠 때는 일반적으로 더 작은 값으로 합친다.

            Find
            : 두 개의 노드의 부모 노드를 확인하여 현재 같은 집합에 속하는지 확인하는
            알고리즘
        */

        class UnionFind {
            constructor(n) {
                this.parent = Array(n);
                this.rank = Array(n).fill(0);

                for(let i=0; i<n; i++) {
                    this.parent[i] = i;
                }
            }
            
            find(x) {
                if(this.parent[x] === x) return x;
                return (this.parent[x] = this.find(this.parent[x]));
            }

            union(x, y) {
                const rootX = this.find(x);
                const rootY = this.find(y);

                if(rootX === rootY) return false;

                if(this.rank[rootX] > this.rank[rootY]) {
                    this.parent[rootY] = rootX;
                } else if(this.rank[rootX] < this.rank[rootY]) {
                    this.parent[rootX] = rootY;
                } else {
                    this.parent[rootY] = rootX;
                    this.rank[rootX]++;
                }

                return true;
            }

            connected(x, y) {
                return this.find(x) === this.find(y);
            }
        }

        const uf = new UnionFind(5); // 5개의 원소를 가진 UnionFind 인스턴스 생성
        console.log('uf: ', uf);

        uf.union(0, 1); // 0번 원소와 1번 원소를 합침
        uf.union(2, 3); // 2번 원소와 3번 원소를 합침
        // console.log(uf.connected(0, 1)); // true 출력
        // console.log(uf.connected(0, 2)); // false 출력
        uf.union(1, 4); // 1번 원소와 4번 원소를 합침
        // console.log(uf.connected(1, 4)); // true 출력
        // console.log(uf.parent); // [1, 0, 2, 3, 1] 출력
    </script>
</body>
</html>